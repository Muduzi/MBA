{%load widget_tweaks%}
{%load static%}
<link rel="stylesheet" type="text/css" href="{% static 'css/searchpost.css'%}" xmlns="http://www.w3.org/1999/html">
<!link for Google icons>
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">

<div class="main">
    <div class="container1">
        <div class="Navigation">
            <button type = 'button' class = 'action' onclick="window.location.href='/post/';">
                <i class="material-icons" style="font-size:15px;">arrow_back</i>
                Back
            </button>
            <button type = 'button' class = 'action' onclick="window.location.href='/';">
                <i class="material-icons" style="font-size:15px;">home</i>
                Home
            </button>
        </div>
        <div class="result">
            {%if message == ''%}
                {%if posts%}
                {%for p in posts%}
                <div class="post">
                    <div class="postheader">
                        <div class="profphoto">
                            <button type="button" class="propic" onclick="window.location.href='/catalogue/';">
                                {%if p.Bussiness.photo.url != None%}
                                <img src="{{p.Bussiness.photo.url}}" alt="Avatar" width=100 height=100  class="rounded-circle">
                                {%else%}
                                <txt>Image not available</txt>
                                {%endif%}
                            </button>
                        </div>
                        <div class="Bname">
                            <text class="bname">{{p.Bussiness.Name}}</text>
                        </div>
                        <div class="Ptitle">
                            <text class="ptitle">{{p.Title}}</text>
                            <text>{{p.date_of_creation}}</text>
                        </div>
                    </div>
                    <div class="postphoto">
                        {%for x in photos%}
                        {%if x.Post == p%}
                        <img src="{{x.photo.url}}" alt="{{p.Description|truncatewords:30}}" class="photo">
                        {%endif%}
                        {%endfor%}
                    </div>
                    <div class="postdescription">
                        <article class="description">
                            {{p.Description|truncatewords:40}}
                        </article>
                    </div>
                </div>
                {%endfor%}
                {%endif%}
            {%else%}
                <div class="posterror">
                    <h1><i class="material-icons" style="font-size:30px; color:red;">error</i>{{message}}</h1>
                </div>
            {%endif%}
        </div>
        <div class="search">
            <form method="post">
                {%csrf_token%}
                <input type="search" required  name="name" class="title" placeholder="Search...">
                <button type='submit' class='searchaction'>
                    <i class="material-icons" style="font-size:15px;">search</i>
                </button>
            </form>
        </div>
    </div>
</div>